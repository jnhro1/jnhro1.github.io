---
layout: post
title: "[Level2] 오픈채팅방"
subtitle: "오픈채팅방"
categories: 프로그래머스
comments: true
tags: Level2
---


<br>

## 오픈채팅방

[프로그래머스](https://programmers.co.kr/learn/courses/30/lessons/42888) <br>

### 처음 접근 방식 > 오답 (시간 초과)
```js
function addPerson(person, id, nickName) {
  person[id] = nickName;
  return person;
}

function changePerson(person, id, nickName) {
  person[id] = nickName;
  return person;
}

function solution(record) {
  let arr = record.map((value) => value.split(" "));
  let person = {};
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    if (arr[i][0] === "Enter") {
      person = addPerson(person, arr[i][1], arr[i][2]);
      result.push(`${arr[i][1]}님이 들어왔습니다.`);
    } else if (arr[i][0] === "Leave") {
      result.push(`${arr[i][1]}님이 나갔습니다.`);
    } else {
      person = changePerson(person, arr[i][1], arr[i][2]);
    }
  }
  let uid = Object.keys(person);

  for (let i = 0; i < result.length; i++) {
    for (let j = 0; j < uid.length; j++) {
      result[i] = result[i].replace(new RegExp(uid[j], "g"), person[uid[j]]);
    }
  }
  return result;
}
```

처음에는 nickName이 아닌 uid로 구성된 result 를 만든 후,
마지막에 정규식을 통해 person 객체의 키를 값으로 바꾸려고 했다.
N ** 2 + N 의 시간복잡도를 가져서 실패
하지만 정규식에 변수를 할당하는 방법을 알게 되었다!

### 정답

```js
function solution(record) {
  let arr = record.map((value) => value.split(" "));
  let person = {};
  let result = [];
  for (let i = 0; i < arr.length; i++) {
    if (arr[i][0] === "Enter") {
      person[arr[i][1]] = arr[i][2];
    } else if (arr[i][0] === "Change") {
      person[arr[i][1]] = arr[i][2];
    }
  }
  for (let i = 0; i < arr.length; i++) {
    if (arr[i][0] === "Enter") {
      result.push(`${person[arr[i][1]]}님이 들어왔습니다.`);
    } else if (arr[i][0] === "Leave") {
      result.push(`${person[arr[i][1]]}님이 나갔습니다.`);
    }
  }
  return result;
}
```

위에서 런타임이 났었기 때문에 최대한 동작을 줄였다.
person 메소드도 따로 만들지 않고 바로 값을 바꾸게끔 하였고,
입장과 변경만 먼저 처리하여 person 객체를 완성시킨후,
다시 입장과 퇴장에 대한 처리를 했다.


### best 풀이

```js
unction solution(record) {
    const userInfo = {};
    const action = [];
    const stateMapping = {
        'Enter': '님이 들어왔습니다.',
        'Leave': '님이 나갔습니다.'
    }

    record.forEach((v) => {
        const [state, id, nick] = v.split(' ');

        if(state !== "Change") {
            action.push([state, id]);
        }

        if(nick) {
            userInfo[id] = nick;
        }
    })

    return action.map(([state, uid]) => {
        return `${userInfo[uid]}${stateMapping[state]}`;    
    })
}
```

<br><br>

## 멀쩡한 사각형

[프로그래머스](https://programmers.co.kr/learn/courses/30/lessons/62048) <br>

수학....<br>
수학..... 수학 어쩌지?<br>
수학은 어떻게 공부해야할까?<br>
잘린 사각형 갯수가 [w + h - 최대공약수] 라는 식을 참고해서 풀었다..ㅠㅠ<br>
유클리드 호제법은 완벽한 암기를 해야겠다.<br>


```js
function gcd(a, b) {
  if (a < b) [a, b] = [b, a];

  while (b > 0) {
    let temp = b;
    b = a % b;
    a = temp;
  }
  return a;
}

function solution(w, h) {
  return w * h - (w + h - gcd(w, h));
}

console.log(solution(8, 12));
```